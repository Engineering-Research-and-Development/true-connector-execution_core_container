# TRUE Connector Github Actions tests

| Test name                                         | Description                                                                    | Tests                                                                                                                                                                                                   | Mixed | Form | Http-headers | Data App <-> ECC<br>(internally) | ECC <-> ECC<br>(between connectors)   |
| ------------------------------------------------- | ------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----- | ---- | ------------ | ------------------------------- | ------------------------------------- |
| SelfDescription                                   | Requests Self Description                                                      | \- checks if response status is 200<br> \- checks if resource catalog exists<br> \- checks if offered resource exists<br> \- checks if contract offer exists<br> \- checks if representation exists     |       | X    |              | \- http/https                   | \- http/https                         |
| SelfDescription-Connector user                    | Requests Self Description with Connector user credentials                      | \- checks is status is  403                                                                                                                                                                             |       | X    |              | \- http/https                   | \- http/https                         |
| SelfDescription-Unathorized no auth               | Requests Self Description without authorization credentials                    | \- checks is status is  401<br> \- chescks if response body contains NOT\_AUTHORIZED                                                                                                                    |       | X    |              | \- http/https                   | \- http/https                         |
| SelfDescription-Unathorized any user              | Requests Self Description with wrong credentials                               | \- checks is status is  401<br> \- chescks if response body contains NOT\_AUTHORIZED                                                                                                                    |       | X    |              | \- http/https                   | \- http/https                         |
| SelfDescription-ContractOffer                     | Requests a specific contract offer                                             | \- checks if response status is 200<br> \- checks if response body contains contract offer                                                                                                              |       | X    |              | \- http/https                   | \- http/https                         |
| SelfDescription-OfferedResource                   | Requests a specific offered resource                                           | \- checks if response status is 200<br> \- checks if text resource exists<br> \- checks if contract offer exists<br> \- checks if text representation exists<br> \- checks if artifact exists           |       | X    |              | \- http/https                   | \- http/https                         |
| SelfDescription-Representation                    | Requests a specific representaion                                              | \- checks if response status is 200<br> \- checks if response body contains text representation                                                                                                         |       | X    |              | \- http/https                   | \- http/https                         |
| Password-valid                                    | Sends request with a valid password for validation                             | \- checks if response status is 200                                                                                                                                                                     |       | X    |              | \- http/https                   | \- http/https                         |
| Password-invalid                                  | Sends request with an invalid password for validation                          | \- checks if response status is 400                                                                                                                                                                     |       | X    |              | \- http/https                   | \- http/https                         |
| Password-unathorized                              | Sends request with a password for validation without authorization credentials | \- checks if response status is 401                                                                                                                                                                     |       | X    |              | \- http/https                   | \- http/https                         |
| Connector-Unauthorized no auth                    | Sends request to connector without authorization credentials                   | \- checks is status is  401<br> \- chescks if response body contains NOT\_AUTHORIZED                                                                                                                    | X     | X    | X            | \- http/https                   | \- http/https                         |
| Connector-Unauthorized API user                   | Sends request to connector with wrong credentials                              | \- checks is status is  401<br> \- chescks if response body contains NOT\_AUTHORIZED                                                                                                                    | X     | X    | X            | \- http/https                   | \- http/https                         |
| Connector-Unauthorized any user                   | Sends request to connector with wrong credentials                              | \- checks is status is  401<br> \- chescks if response body contains NOT\_AUTHORIZED                                                                                                                    | X     | X    | X            | \- http/https                   | \- http/https                         |
| Firewall - not allowed HTTP request          | Sends request to connector with not allowed HTTP operation - OPTIONS                              | \- checks is status is  405                                                                                                                 | X     | X    | X            | \- http/https                   | \- http/https                         |
| Audit logs          | Sends request to connector to fetch all audit logs                              | \- checks is status is  200                                                                                                                 | X     | X    | X            | \- http/https                   | \- http/https                         |
| Audit logs for date          | Sends request to connector to fetch audit logs for specific date                                 | \- checks is status is  200                                                                                                                 | X     | X    | X            | \- http/https                   | \- http/https                         |
| Audit logs - Unauthorized API user          | Fetch audit logs with invalid user - unauthorized                              | \- checks is status is  401                                                                                                                 | X     | X    | X            | \- http/https                   | \- http/https                         |
| Audit logs - Invalid date parameter | Fetch audit logs with invalid date format                       | \- checks is status is  400                                                                                                                 | X     | X    | X            | \- http/https                   | \- http/https                         |
| Description Request Message                       | Sends a Description Request Message                                            | \- checks if response status is 200<br> \- checks if response body contains specific offered resource                                                                                                   | X     | X    | X            | \- http/https                   | \- http/https                         |
| Description Request Message with offered resource | Sends a Description Request Message requesting a specific offered resource     | \- checks if response status is 200<br> \- checks if contract artifact exists<br> \- checks if contract id exists<br> \- checks if contract permission exists<br> \- checks if contract provider exists | X     | X    | X            | \- http/https                   | \- http/https                         |
| Contract Request Message                          | Sends a Contract Request Message                                               | \- checks if response status is 200<br> \- checks if contract agreement exists<br> \- checks if transfer contract exists                                                                                | X     | X    | X            | \- http/https                   | \- http/https                         |
| Contract Agreement Message                        | Sends a Contract Agreement Message                                             | \- checks if response status is 200<br> \- checks if responsee is a Message Processed Notification Message                                                                                              | X     | X    | X            | \- http/https                   | \- http/https                         |
| Artifact Request Message                          | Sends a Artifact Request Message                                               | \- checks if response status is 200<br> \- checks if response body is as expected                                                                                                                       | X     | X    | X            | \- http/https<br> \- wss        | \- http/https<br> \- wss<br>\- idscp2 |
| BigPayload                                        | Requests a big text artifact                                                   | \- checks if response status is 200<br> \- checks if response body contains a specific string                                                                                                           | X     | X    | X            | \- http/https                   | \- http/https                         |


The Github Actions tests simulate some real world scenarios and use cases of the connector. This is achieved by using Postman scripts which are executed on every push to the <a href=https://github.com/Engineering-Research-and-Development/true-connector-execution_core_container> Execution Core Container repository</a>. The pushed code will be first built using Maven where it has to pass all junit tests.
 Afterwards the JAR is used to create a Docker image using the <a href=https://github.com/Engineering-Research-and-Development/true-connector-execution_core_container/blob/master/Dockerfile>Dockerfile</a> in the same repository.
 During the Github Actions <a href=https://github.com/Engineering-Research-and-Development/true-connector-execution_core_container/blob/master/.github/workflows/ECC.yml>workflow </a> multiple TRUE Connector instances will be run with different configurations on which the previously mentioned Postman scripts will be executed.
 <a href=https://github.com/Engineering-Research-and-Development/true-connector-execution_core_container/tree/master/ci/docker/test-cases>These scripts</a> consist of requests which will be sent between those connector instances and tests which will be performed on the received responses.